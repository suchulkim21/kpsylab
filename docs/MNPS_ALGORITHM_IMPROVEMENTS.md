# MNPS 알고리즘 개선 사항

채점·정확도·리포트 알고리즘의 개선 항목을 우선순위와 난이도 기준으로 정리한 문서입니다.

**적용 현황**: ✅ 적용됨 / ⬜ 미적용

---

## 1. 채점·정확도 알고리즘 (`scoreDarkNature`)

### 1.1 검증 문항 확대 ✅
- **현재**: v1~v4 4문항만으로 `validationScore` 계산.
- **개선**: 검증 문항을 6~8문항으로 확대(정직 2, 일관 2, 사회적 바람직성 역 2, 실제반영 1~2). `validationScores`에 v5~v8 등 추가 ID를 읽어 평균에 포함.
- **효과**: 검증 점수 신뢰도 상승 → 정직·일관 응답 시 분석 정확도가 자연스럽게 95% 근처 도달.
- **난이도**: 중

### 1.2 검증 점수 높을 때 일관성 패널티 완화 ✅
- **현재**: `consistencySpread < 20`이면 무조건 패널티(최대 -20).
- **개선**: `validationScore`가 높을 때 spread 패널티를 완화.  
  예: `consistencyPenalty = rawPenalty * (1 - validationScore/100)` 또는 `validationScore >= 70`이면 패널티 50% 감면.
- **효과**: “정직·일관” 자기보고가 높은 응답자는 spread가 다소 낮아도 95%에 근접 가능.
- **난이도**: 낮

### 1.3 검증 문항 가중 ✅
- **현재**: v1~v4 동일 가중 평균.
- **개선**: v1(정직), v4(실제반영) 가중 1.2, v3(역문) 역코딩 후 가중 1.2, v2(일관) 1.0. 가중 평균 후 0~100으로 정규화해 `validationScore`로 사용.
- **효과**: 정직·바람직성 편향이 정확도 공식에 더 잘 반영.
- **난이도**: 낮

### 1.4 Trait 내부 일관성(SD) 반영 ✅
- **현재**: trait별 4문항 평균만 사용, 문항 간 분산 미사용.
- **개선**: trait별 4문항 점수의 표준편차(SD) 계산. SD가 적당한 구간(예: 0.3~1.2, 1~5 척도)이면 “차별화되면서 일관된 응답”으로 간주해 분석 정확도에 +3~5점 보너스.
- **효과**: 문항만의 결과로 정확도가 소폭 상승.
- **난이도**: 중

### 1.5 일관성 쌍 문항(동의어 문항) ✅
- **현재**: 없음.
- **개선**: 같은 구인을 다른 표현으로 묻는 문항 쌍 2~4쌍 추가. 쌍별 |답1−답2| 평균이 작을수록 보너스, 클수록 패널티를 `analysisAccuracy`에 반영.
- **효과**: 일관된 응답자 구분 강화 → 95% 자연 도달에 기여.
- **난이도**: 높음(문항 설계·채점 로직 확장)

---

## 2. 리포트 조립 알고리즘 (`assembleReport`)

### 2.1 SubFactor 활용 강화 ✅
- **현재**: 아키타입·스니펫 선택에 4개 trait 위주 사용, subFactor(도덕적 이탈·악의 등)는 일부 구간에서만 사용.
- **개선**: 아키타입 분기·스니펫 선택 시 `subFactorScores`(moralDisengagement, spitefulness 등)를 더 적극 반영해 해석 세분화.
- **효과**: 해석이 더 구체적으로 맞춤화.
- **난이도**: 중

### 2.2 방어/일관성 경고 문구 조건 정교화 ✅
- **현재**: `consistencySpread`, `validationScore` 기반으로 “응답 신뢰도 참고” 블록 노출.
- **개선**: 임계값(예: spread < 15, validation < 50)과 조합 규칙을 문서화하고, 필요 시 구간별 메시지 차등화(경미/중등/심각).
- **효과**: 사용자에게 신뢰도 수준이 더 명확히 전달.
- **난이도**: 낮

### 2.3 스니펫 선택 다양화 ✅
- **현재**: trait 레벨(high/mid/low) + 합산 기반 인덱스로 contentLibrary에서 1개 선택.
- **개선**: subFactor·시너지 조합을 반영한 다중 후보 풀에서 가중 랜덤 또는 규칙 기반 선택으로 문장 중복·단조로움 감소.
- **효과**: 리포트 가독성·몰입도 향상.
- **난이도**: 중

---

## 3. 규준·임계값

### 3.1 high/mid/low 임계값 정당화 ✅
- **현재**: high ≥ 75, mid 45~75 미만, low < 45 등 임의 설정.
- **개선**: 표준 Dark Tetrad/D-Factor 문헌 또는 자체 수집 데이터로 평균·표준편차·백분위 산출 후, high/mid/low를 규준에 맞게 재설정(예: 상위 25% = high).
- **효과**: “얼마나 높은/낮은지” 해석의 객관성 향상.
- **난이도**: 높음(데이터 수집·분석 필요)

### 3.2 D-Total 가중치·Inter-correlation 검토 ✅
- **현재**: TRAIT_WEIGHTS, SUBFACTOR_WEIGHTS, interCorrelationWeight = traitAvg * 0.2 고정.
- **개선**: 문헌 또는 실측 데이터로 가중치·가산 공식 검증·조정.
- **효과**: 종합 D 점수의 타당도 향상.
- **난이도**: 높음

---

## 4. 요약 표

| 구분 | 개선 항목 | 난이도 | 효과 |
|------|-----------|--------|------|
| 채점/정확도 | 검증 문항 6~8문항 확대 | 중 | 높음 |
| 채점/정확도 | 검증 높을 때 spread 패널티 완화 | 낮 | 중상 |
| 채점/정확도 | 검증 문항 가중(정직·역문 강조) | 낮 | 중 |
| 채점/정확도 | Trait 내부 일관성(SD) 보너스 | 중 | 중 |
| 채점/정확도 | 일관성 쌍 문항 2~4쌍 | 높음 | 높음 |
| 리포트 | SubFactor 활용 강화 | 중 | 중 |
| 리포트 | 방어/일관성 경고 조건 정교화 | 낮 | 중 |
| 리포트 | 스니펫 선택 다양화 | 중 | 중 |
| 규준 | high/mid/low 규준 정당화 | 높음 | 높음 |
| 규준 | D-Total 가중치·Inter-correlation 검토 | 높음 | 중상 |

---

## 5. 참고 문서

- `MNPS_ACCURACY_95_RESEARCH.md`: 질의·응답만으로 정확도 95%에 도달하는 방법 연구.
- `MNPS_ACCURACY_ANALYSIS.md`: 채점·해석·검증 문항 활용 현황 및 한계 분석.
