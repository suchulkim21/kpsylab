# 기능 플래그 및 런칭 전략 (Feature Flags and Launch Strategy)

**문서 성격**: KPSY LAB Portal에서 기능 플래그(`featureFlags.ts`)의 의미, 전환 시점, 런칭 단계를 정의한 운영 기준.  
**참조**: `lib/constants/featureFlags.ts`, [PROJECT_GAPS_AND_REMEDIATION.md](./PROJECT_GAPS_AND_REMEDIATION.md)

---

## 1. 현재 플래그 정의

| 플래그 | 위치 | 현재 값 | 노출 범위 |
|--------|------|---------|-----------|
| **BLOG_ENABLED** | `lib/constants/featureFlags.ts` | `false` | `true` 시 네비게이션·관리자 대시보드에 블로그 링크/기능 노출 |
| **MIND_ARCHITECT_ENABLED** | 동일 | `false` | `true` 시 네비·홈·서비스 소개에 마인드 아키텍터(성장 로드맵) 카드·링크·CTA 노출 |
| **MNPS_ENABLED** | 동일 | `false` | `true` 시 홈·네비·서비스 소개에 MNPS 테스트 링크 노출 |

---

## 2. 전환 시점 가이드라인

플래그를 `true`로 바꾸기 전에 아래를 충족하는 것을 권장한다.

### 2.1 MNPS_ENABLED

| 조건 | 내용 |
|------|------|
| **기능** | 테스트 플로우·채점·결과 저장·결과 페이지·이용약관·개인정보처리방침·면책이 구현되어 있고, DB(Supabase) 마이그레이션·환경 변수(Service Role 등)가 적용된 상태 |
| **품질** | `npm run build`·`npm run lint` 통과, (선택) 핵심 E2E 1사이클 확인 |
| **운영** | 베타/소프트 런칭 목표일이 정해졌거나, “일단 노출해 두고 트래픽은 제한”하는 전략이 있을 때 |
| **주의** | 결제(Stripe 등) 미연동 시 Bad 리포트는 UI에서 잠금 해제만 가능. 유료화 시 결제·웹훅 연동 후 전환 권장 |

### 2.2 MIND_ARCHITECT_ENABLED

| 조건 | 내용 |
|------|------|
| **기능** | 성장 로드맵(M1·M2·M3) 플로우·분석·통합 블루프린트가 안정적으로 동작하는 상태 |
| **품질** | 빌드·린트 통과, (선택) 성장 로드맵 E2E 1사이클 확인 |
| **운영** | MNPS와 동시에 노출할지, MNPS 이후 단계적으로 노출할지 정책이 정해졌을 때 |
| **주의** | 아키텍처 점검·리팩터링 시 일시적으로 `false`로 두고 점검 후 다시 `true` 가능 |

### 2.3 BLOG_ENABLED

| 조건 | 내용 |
|------|------|
| **기능** | 블로그 목록·상세·(선택) 관리자 발행·이미지·SEO 메타가 동작하는 상태 |
| **품질** | 빌드·린트 통과, (선택) 블로그 E2E |
| **운영** | 발행할 포스트가 일정 수 이상 준비되었거나, “준비되는 대로 공개” 전략이 있을 때 |
| **주의** | 관리자 대시보드·API는 보안(ADMIN_SECRET 등) 확인 후 노출 권장 |

---

## 3. 런칭 단계 제안

| 단계 | 목표 | 플래그 조합 예시 | 비고 |
|------|------|-------------------|------|
| **준비** | 배포·DB·env만 갖춘 상태 | 전부 `false` | 현재와 유사. 외부에는 서비스 소개·정적 페이지만 노출 |
| **베타** | MNPS만 제한적으로 공개 | `MNPS_ENABLED = true`, 나머지 `false` | 링크는 보이지만, 베타 안내 문구·트래픽 모니터링 권장 |
| **확장** | MNPS + 성장 로드맵 | `MNPS_ENABLED = true`, `MIND_ARCHITECT_ENABLED = true`, `BLOG_ENABLED = false` | 두 서비스 진입점 동시 제공 |
| **전면** | 블로그 포함 전체 노출 | 세 플래그 모두 `true` | 결제·규준·OG 등 P2 보완 후 전환 시 운영 리스크 감소 |

---

## 4. 배포·환경별 참고

- **로컬/스테이징**: 특정 기능만 검증하려면 해당 플래그만 `true`로 두고 나머지는 `false` 유지 가능.
- **프로덕션**: 위 “전환 시점”을 만족한 플래그만 `true`로 전환하고, 변경 시 배포 로그에 “어떤 플래그를 켰는지”를 남기면 추적에 유리함.
- **롤백**: 문제 발생 시 해당 플래그를 `false`로 되돌리고 재배포하면, 해당 기능만 숨길 수 있음.

---

## 5. 문서 유지

- `featureFlags.ts`에 플래그를 추가·삭제할 때 이 문서의 §1을 갱신한다.
- “언제 켜기로 했는지” 결정이 바뀌면 §2·§3을 수정한다.

---

*이 문서는 실제 런칭 일정을 강제하지 않으며, 팀 정책에 따른 판단 기준을 제공합니다.*
